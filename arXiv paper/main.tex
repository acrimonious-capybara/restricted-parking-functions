% arXiv-friendly version of the paper
\documentclass[12 pt]{amsart}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}

\usepackage[largesc]{newpxtext}
\usepackage[varbb]{newpxmath}

% wider margins just for now, so that todonotes are easily visible
\usepackage[margin = 1.5 in]{geometry}
\usepackage{microtype}

% theorem setup
\usepackage{amsthm, thmtools, thm-restate}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\theoremstyle{definition} % definition style
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\theoremstyle{remark} % remark style
\newtheorem{remark}[theorem]{Remark}

\usepackage{hyperref, cleveref}
\hypersetup{ % make links pretty and not boxed
colorlinks,
linkcolor = blue,
urlcolor = blue,
citecolor = blue}

% add your own todostyle!
\usepackage{todonotes}
\todostyle{jayden}{color = pink}
\todostyle{jasper}{color = lime}
\todostyle{alan}{color = purple}

\title{Preference-restricted parking functions}

\author[Kappler]{Alan Kappler}
\address[A. Kappler]{Harvey Mudd College, United States}
\email{akappler@g.hmc.edu}

\author[Thadani]{Jayden Thadani}
\address[J. Thadani]{Harvey Mudd College, United States}
\email{jthadani@hmc.edu}

% \author[Bown]{Jasper Bown}
% \address[J. Bown]{Harvey Mudd College, United States}
% \email{abown@g.hmc.edu}

\begin{document}
	

\begin{abstract}
	We demonstrate a new paradigm for solving parking problems --- preference-restricted parking functions. By considering parking functions of length $n$ where all cars prefer spots in some convenient $S \subset [n]$, we convert questions about complicated parking procedures into more easily understood questions about ordinary parking functions. In particular, we demonstrate choices of $S$ that yield new combinatorial insights to the results in \cite{cameron-johannsen-prellberg-schweitzer-2008} and a proof of Abel's binomial theorem, an elementary proof of a difficult result of \cite{blake-konheim-1977} and a new characterisation of prime parking functions respectively.
\end{abstract}

\maketitle

\pagebreak

\tableofcontents

\pagebreak

% just set up to make sure the todo list gets printed fine at the start of the doc
\makeatletter
\providecommand\@dotsep{5}
\makeatother
\listoftodos\relax

\pagebreak

\section{Introduction}

The classical parking function problem is to describe the parking preferences cars can have that allow every car to park under a certain parking procedure. Each of $n$ cars goes down a one-way street with $n$ parking spots, attempts to park in its preferred spot, and then each subsequent spot until it parks.

The \emph{parking functions} $\pi : [n] \to [n]$ that take cars to a list of preferences that allows everyone to park are well understood. However, many of the variants of the parking function question considered in the literature do not fully leverage our knowledge of parking functions ---
\begin{enumerate}
	\item What if there are fewer cars than spots? How can we minimise the number of cars unable to park? (A special case of the variants considered in \cite{cameron-johannsen-prellberg-schweitzer-2008}.)
	\item What if each parking spot can accommodate more than one car? (Perhaps, as in \cite{blake-konheim-1977}, our parking spots are hash buckets, and our cars are data.)
	\item Prime parking functions.
\end{enumerate}
We will show that all of these can be understood as \emph{$S$-restricted parking functions} --- parking functions $\pi : [n] \to S \subset [n]$. 

These reinterpretations yield more complete theories of the variants, new combinatorial insights \todo[jayden]{remove if we don't have room for any of the equivalence class results on $[s]$-restrictions}, simpler proofs, and connections to deep results in combinatorics. In some sense, $S$-restricted parking functions is a paradigm for solving parking questions that strikes the balance between the power of $\mathbf{u}$-parking functions and the obvious combinatorial intuition of the original parking function question.

\section{Initial segment restrictions}

\begin{restatable}{theorem}{resPFcount}
	\label{thm:resPFcount}
	\[
		\begin{split}
			\# \mathrm{PF}_{n \mid [s]} & = s^{n} - \sum_{i = 0}^{s - 1} \binom{n}{i} (i + 1)^{i - 1} (s - i - 1)^{n - i} \\
				    & = \sum_{i = s}^{n} \binom{n}{i} (i + 1)^{i - 1} (s - i - 1)^{n - i}.
		\end{split}
	\]
\end{restatable}

\begin{restatable}{theorem}{resPFcount1}
    \label{thm:resPFcount1}
    Let $1\le s\le n.$ Then the number of $[s]$-restricted parking functions is
    \[s^{n} - \sum_{i = 0}^{s - 1} \binom{n}{i} (i + 1)^{i - 1} (s - i - 1)^{n - i}.\]
\end{restatable}

\begin{restatable}{theorem}{resPFcount2}
    \label{thm:resPFcount2}
    The number of $[s]$-restricted parking functions may be expressed as
    \[\sum_{i = s}^{n} \binom{n}{i} (i + 1)^{i - 1} (s - i - 1)^{n - i}.\]
\end{restatable}

\begin{theorem}
    \label{thm:resPPFcount1}
    For $1 \le s < n,$, the number of $[s]$-restricted parking functions which are also prime is 
    \[s^{n} - (s - 1)^{n} - \sum_{i = 1}^{s} \binom{n}{i} (i - 1)^{i - 1} (s - i)^{n - i}.\]
\end{theorem}

\begin{theorem}
    \label{thm:resPPFcount2}
    For $1 \le s < n,$, the number of $[s]$-restricted parking functions which are also prime may be expressed as
    \[\sum_{i = s + 1}^{n} \binom{n}{i} (i - 1)^{i - 1} (s - i)^{n - i}\]
\end{theorem}

\subsection{Abel's binomial theorem}

In enumerating $[s]$-restricted parking functions and their prime variants, we demonstrated two different counts for each --- one by excluding all of the restricted preference lists that aren't the desired type of parking function, and another by counting (by involution) all of the desired parking functions that are also restricted as desired. In each case, both counts are connected by Abel's binomial theorem.

Abel's binomial theorem has many equivalent statements, but perhaps most common is the following version:

\begin{restatable}[Abel's binomial theorem]{theorem}{abelsbin}
	\[
		(x + y + n)^{n} = \sum_{i = 0}^{n} \binom{n}{i} x (x + i)^{i - 1} (y + n - i)^{n - i}.
	\]
\end{restatable}

\begin{theorem}
    \label{thm:res-1s-enumerator}
    The sum over $[s]$-restricted parking functions $\pi$ of $x^{|\pi^{-1}(\{1\})|}$ may be expressed as
    \[s^{n} - \sum_{i = 0}^{s - 1} \binom{n}{i} (x + i)^{i - 1} (s - i - 1)^{n - i},\]
    or as
    \[\sum_{i = s}^{n} \binom{n}{i} (x + i)^{i - 1} (s - i - 1)^{n - i}.\]
\end{theorem}

\section{Prime parking functions}

\begin{restatable}{theorem}{primeIsRes}
	There is a bijection between prime parking functions and $[n] \setminus \{ 2 \}$-restricted parking functions (of length $n$). Thus,
	\[
		\# \mathrm{PPF}_{n} = \# \mathrm{PF}_{n \mid [n] \setminus \{ 2 \}} 
	\]
\end{restatable}

\begin{restatable}{theorem}{resPrimeIsRes}
	There is a bijection between $S$-restricted prime parking functions and $T$-restricted parking functions (of length $n$) where
	\[
		T = \{ 1 \} \cup \{ i + 1 \mid i \in S, 1 < i < n \}.
	\]
	Thus,
	\[
		\# \mathrm{PPF}_{n \mid S} = \# \mathrm{PF}_{n \mid T}.
	\]
\end{restatable}

\section{Modular restrictions}

\begin{restatable}{theorem}{modPFcount}
	\label{thm:modPFcount}
	The number of parking functions of length $gs - 1$ with gap $g$ between possible preferred spots is
	\[
		\# \mathrm{PF}_{gs - 1 \mid S} = s^{gs - 2}
	\]
	where $S$ is the set of the first $s$ natural numbers $j$ with $j \equiv 1 \pmod g$.
\end{restatable}

\begin{restatable}{theorem}{modPFcount2}
	The number of parking functions of length $gs - 2$ cars with gap $g$ between possible preferred spots is
	\[
		\#PF_{gs - 2 \mid S} = s^{gs - 3} - \frac{1}{2} \sum_{i = 1}^{s - 1} \binom{gs - 2}{gs - 1} i^{gi - 2} (s - i)^{g(s - i) - 2}
	\]
	where $S$ is the set of the first $s$ natural numbers $j$ with $j \equiv 1 \pmod g$.
\end{restatable}

\section{Connections and conjectures}

\bibliography{references}
\bibliographystyle{alpha}

\end{document}
